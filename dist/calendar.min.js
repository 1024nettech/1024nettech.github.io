!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Calendar=t()}(this,function(){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);a=a.call(e,t||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}(s.key),s)}}var u=function(){function M(e){if(this instanceof M)return this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null},this.data={minYear:0,maxYear:0,year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this.initialize(e).render().addEventListeners(),this;throw new TypeError("Cannot call a class as a function")}var e,t,a;return e=M,a=[{key:"getYear",value:function(e){e=(e?new Date(M.toAllSupported(e)):new Date).getFullYear();return{value:e,text:e.toString(),fullText:e+"年"}}},{key:"getMonth",value:function(e){var t=e?new Date(M.toAllSupported(e)):new Date,e=M.getYear(e),t=t.getMonth();return{value:t+=1,text:e.text+"-"+t,fullText:e.fullText+t+"月"}}},{key:"getDate",value:function(e){var t=e?new Date(M.toAllSupported(e)):new Date,a=M.getYear(e),s=M.getMonth(e),t=t.getDate(),e=M.getDay(e),i=a.value+"-"+s.value+"-"+t,n=s.fullText+t+"日";return{year:a.value,month:s.value,date:t,day:e.value,text:i,fullText:n+" "+e.fullText}}},{key:"getDay",value:function(e){var e=(e?new Date(M.toAllSupported(e)):new Date).getDay(),t=M.defaults.DAYS[e];return{value:e,text:t,fullText:"星期"+t}}},{key:"getToday",value:function(){return M.getDate()}},{key:"getYears",value:function(e){var e=M.getYear(e).value,t=e.toString().split(""),t=parseInt(t[t.length-1],10),a=0,s=0,s=0===t?(a=e)+9:9===t?(a=e-9,e):(a=e-t,e+(9-t));return{start:a,end:s}}},{key:"getWeekRanges",value:function(e){var t=M.defaults.DATES,a=M.isLeapYear,s=M.getDay(e).value,e=e.split("-"),i=parseInt(e[0],10),n=parseInt(e[1],10),e=parseInt(e[2],10),r=t[n-1],l=i,o=n,h=e-s,u=i,c=n,e=e+(6-s),s=0;return a(i)&&2===n&&(r+=1),h<1&&(--o,h=(s=n-2)<0?(--l,o=12,t[11]+h):t[s]+h),r<e&&(c+=1,e-=r,11<s)&&(u+=1,c=1),M.getRanges(l+"-"+o+"-"+h,u+"-"+c+"-"+e)}},{key:"getRanges",value:function(e,t){var a,s,i=[],e=e.split("-"),t=t.split("-"),n=new Date,r=new Date;for(n.setUTCFullYear(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10)),r.setUTCFullYear(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10)),e=n.getTime(),a=r.getTime(),s=e;s<=a;s+=864e5)i.push(M.getDate(s).text);return i}},{key:"isLeapYear",value:function(e){return(e%4==0||e%400==0)&&e%100!=0}},{key:"isToday",value:function(e){return M.isDatesEqual(e)}},{key:"isDatesEqual",value:function(e,t){var a=M.getDate;return M.isEqual(a(e).text,a(t).text)}},{key:"isEqual",value:function(e,t){var a=M.toAllSupported;return new Date(a(e)).getTime()===new Date(a(t)).getTime()}},{key:"toAllSupported",value:function(e){var t=M.Utils,a=[];return t.isNumber(e)?e:t.isString(e)?(e.indexOf("-")?a=e.split("-"):e.indexOf("/")&&(a=e.split("/")),1===a.length?(a.push("1"),a.push("1")):2===a.length&&(4===a[0].length?a.push("1"):4===data[1].length&&a.unshift("1")),a.join("/")):void 0}}],(t=[{key:"initialize",value:function(e){var t,a,s,i,n,r,l=M.getYear().value;switch(this.set(M.defaults).set(e),t=this.get("time"),e=this.get("pickMode"),s=(a=M.getMonth(t)).text,this.setYear(t).setMonth(t).setDate(t)._setYears(t),e){case"multiple":this.data.picked.push(this.getDate().text);break;case"range":n=s+"-1",r=s+"-"+this.get("DATES")[a.value-1],this.data.picked=[n,r];break;case"week":n=(i=M.getWeekRanges(t))[0],r=i[i.length-1],this.data.picked=[n,r]}return this.data.minYear=l-100,this.data.maxYear=l+100,this._createElements(),this}},{key:"render",value:function(){var e=this.getEls(),t=e.wrap,a=e.header,s=e.switcher,i=e.body,n=e.footer,r=document.createDocumentFragment();return this._renderTitle(),a.appendChild(e.title),this.get("hasSwitcher")&&(s.appendChild(e.prev),s.appendChild(e.next),a.appendChild(s)),this._renderDays(),i.appendChild(e.week),this._renderDates(),i.appendChild(e.dates),this._renderMonths(),i.appendChild(e.months),this._renderYears(),i.appendChild(e.years),this.get("hasFooter")&&(this._renderFooter(),n.appendChild(e.today),this.get("hasClock"))&&n.appendChild(e.time),t.appendChild(a),t.appendChild(i),this.get("hasFooter")&&t.appendChild(n),r.appendChild(t),e.parent.appendChild(r),this}},{key:"addEventListeners",value:function(){var e=".",t=this.get("STYLES"),a="click",s=e+t.TITLE,i=e+t.PREV,n=e+t.NEXT,r=e+t.DATE,l=e+t.MONTH,o=e+t.YEAR,e=e+t.TODAY,t=M.Delegate,h=this.getEls().wrap;return t.on(h,s,a,this._titleClick,this),this.get("hasSwitcher")&&(t.on(h,i,a,this._prevClick,this),t.on(h,n,a,this._nextClick,this)),t.on(h,r,a,this._dateClick,this),t.on(h,l,a,this._monthClick,this),t.on(h,o,a,this._yearClick,this),this.get("hasClock")&&t.on(h,e,a,this._todayClick,this),this}},{key:"reload",value:function(e){return this.destroy().initialize(e).render().addEventListeners(),this}},{key:"destroy",value:function(){return this.removeEventListeners().hide().remove().reset(),this}},{key:"removeEventListeners",value:function(){var e="click",t=M.Delegate,a=this.getEls().wrap;return t.off(a,e,this._titleClick),this.get("hasSwitcher")&&(t.off(a,e,this._prevClick),t.off(a,e,this._nextClick)),t.off(a,e,this._dateClick),t.off(a,e,this._monthClick),t.off(a,e,this._yearClick),this.get("hasClock")&&t.off(a,e,this._todayClick),this}},{key:"remove",value:function(){var e=this.getEls();return e.parent.removeChild(e.wrap),this}},{key:"reset",value:function(){return this.attributes={parent:"",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,MONTHS:[],DAYS:[],DATES:[],STYLES:{}},this.elements={parent:null,wrap:null,header:null,title:null,switcher:null,prev:null,next:null,body:null,week:null,dates:null,months:null,years:null,footer:null,today:null,time:null,year:null,month:null,date:null},this.data={minYear:0,maxYear:0,years:{start:0,end:0},year:0,month:0,date:{year:0,month:0,date:0,day:0,text:"",fullText:""},picked:[]},this}},{key:"get",value:function(e){return this.attributes[e]}},{key:"set",value:function(){return Object.assign(this.attributes,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}),this}},{key:"getEls",value:function(){return this.elements}},{key:"getYear",value:function(){return this.data.year}},{key:"setYear",value:function(e){return this.data.year=M.getYear(e).value,this}},{key:"getMonth",value:function(){return this.data.month}},{key:"setMonth",value:function(e){return this.data.month=M.getMonth(e).value,this}},{key:"getDate",value:function(){return this.data.date}},{key:"setDate",value:function(e){return this.data.date=M.getDate(e),this}},{key:"getYears",value:function(){return this.data.years}},{key:"getPicked",value:function(){return this.data.picked}},{key:"update",value:function(){return this.updateViewMode(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0).updateView(),this}},{key:"updateViewMode",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return 2<e?e=2:e<0&&(e=0),this.set({viewMode:e}),this}},{key:"updateView",value:function(){var e=this.get("STYLES").HIDDEN,t=M.DOM,a=t.addClass,s=t.removeClass,t=this.getEls(),i=t.week,n=t.dates,r=t.months,l=t.years;switch(this._renderTitle(),this.get("viewMode")){case 0:a(r,e),a(l,e),s(i,e),s(n,e),this._repaintDates();break;case 1:a(i,e),a(n,e),a(l,e),s(r,e),this._repaintMonths();break;case 2:a(i,e),a(n,e),a(r,e),s(l,e),this._repaintYears()}return this}},{key:"prev",value:function(){var e,t=this.getYears().start,a=this.getYear(),s=this.getMonth(),i=this.data.minYear;switch(this.get("viewMode")){case 0:--s<1&&(s=12,--a<i)&&(a=i),this.setYear(e=a+"-"+s+"-1").setMonth(e);break;case 1:this.setYear((a=--a<i?i:a)+"-1-1");break;case 2:this._setYears((t=(t-=10)<i?i+9:t).toString())}return this.updateView(),this}},{key:"next",value:function(){var e,t=this.getYears().start,a=this.getYear(),s=this.getMonth(),i=this.data.maxYear;switch(this.get("viewMode")){case 0:12<(s+=1)&&i<(a+=s=1)&&(a=i),this.setYear(e=a+"-"+s+"-1").setMonth(e);break;case 1:this.setYear((a=i<(a+=1)?i:a)+"-1-1");break;case 2:this._setYears((t=i<(t+=10)?i-9:t).toString())}return this.updateView(),this}},{key:"pickDate",value:function(e){var t,a=this.get("STYLES").PICKED,s=M.DOM,i=s.hasClass,n=s.addClass,r=s.removeClass,l=M.Utils.isFunction,s=this.get("pickMode"),o=this.getEls(),h=e.getAttribute("data-date"),u=this.get("onDatePick");if(i(e,a))switch(s){case"single":case"week":return!1;case"multiple":r(e,a),this._removePicked(h),t=this.getPicked(),this.setDate(t[t.length-1]),l(u)&&u(t,e,this);break;case"range":this.data.picked=[],this.data.picked.push(h),this.setDate(h),o.date=e,this._updateDateRanges(),l(u)&&u(this.getPicked(),e,this)}else switch(this.setYear(h).setMonth(h),s){case"single":(c=o.date)&&r(c,a),n(e,a),o.date=e,this.setDate(h),l(u)&&u(h,e,this);break;case"multiple":this.data.picked.push(h),this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),n(e,a),l(u)&&u(this.getPicked(),e,this);break;case"range":switch(this.data.picked.length){case 0:case 1:this.data.picked.push(h),2===this.data.picked.length&&this.data.picked.sort(),t=this.getPicked(),this.setDate(t[t.length-1]),o.date=e,this._updateDateRanges(),l(u)&&u(t,e,this);break;case 2:this.data.picked=[],this.data.picked.push(h),o.date=e,this._updateDateRanges()}break;case"week":var c=M.getWeekRanges(h);this.data.picked=[c[0],c[c.length-1]],this.setDate(c[c.length-1]),o.date=e,this._updateWeekRanges(),l(u)&&u(this.getPicked(),e,this)}return this}},{key:"pickMonth",value:function(e){var t=this.get("STYLES").PICKED,a=M.DOM,s=this.getEls(),i=s.month,n=e.getAttribute("data-month"),r=this.get("onMonthPick");return(a.hasClass(e,t)?this:(i&&a.removeClass(i,t),a.addClass(e,t),s.month=e,this.setYear(n).setMonth(n)._setYears(n))).update(),M.Utils.isFunction(r)&&r(n,e,this),this}},{key:"pickYear",value:function(e){var t=this.get("STYLES").PICKED,a=M.DOM,s=this.getEls(),i=s.year,n=e.getAttribute("data-year"),r=this.get("onYearPick");return(a.hasClass(e,t)?this.setYear(n):(i&&a.removeClass(i,t),a.addClass(e,t),s.year=e,this.setYear(n)._setYears(n))).update(1),M.Utils.isFunction(r)&&r(n,e,this),this}},{key:"pickToday",value:function(){var e=M.getToday().text,t=this.get("onTodayPick");return this.setYear(e).setMonth(e).setDate(e)._setYears(e).update(),M.Utils.isFunction(t)&&t(e,this.getEls().dates.querySelector("[data-date="+e+"]"),this),this}},{key:"hide",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return M.DOM.addClass(t,e),this}},{key:"show",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return M.DOM.removeClass(t,e),this}},{key:"toggle",value:function(){var e=this.get("STYLES").HIDDEN,t=this.getEls().wrap;return M.DOM.hasClass(t,e)?this.show():this.hide(),this}},{key:"_setYears",value:function(e){return this.data.years=M.getYears(e),this}},{key:"_removePicked",value:function(e){var t=this.getPicked(),e=t.indexOf(e);return-1<e&&t.splice(e,1),this}},{key:"_createElements",value:function(){var e=this.get("STYLES"),t=e.WRAP,a=e.WRAP_WITHOUT_FOOTER,s=e.HEADER,i=e.TITLE,n=e.SWITCHER,r=e.PREV,l=e.ICON_PREV,o=e.NEXT,h=e.ICON_NEXT,u=e.BODY,c=e.WEEK,d=e.DATES,g=e.MONTHS,p=e.YEARS,v=e.FOOTER,f=e.FOOTER_DATE,m=e.TODAY,E=e.FOOTER_TIME,k=e.TIME,y=e.TEXT,D=e.HIDDEN,T=" ",e=this.get("hasFooter"),C=this.getEls(),S=M.DOM.createElement,Y=c,N=d,_=g,w=p;switch(this.get("viewMode")){case 0:_+=T+D,w+=T+D;break;case 1:Y+=T+D,N+=T+D,w+=T+D;break;case 2:Y+=T+D,N+=T+D,_+=T+D}return e||(t+=T+a),C.parent=document.getElementById(this.get("parent")),C.wrap=S("div",{id:M.Utils.guid("calendar"),className:t}),C.header=S("div",{className:s}),C.title=S("h4",{className:i},[S("span",{className:y})]),this.get("hasSwitcher")&&(C.switcher=S("div",{className:n}),C.prev=S("div",{className:r},[S("span",{className:y},[S("i",{className:l})])]),C.next=S("div",{className:o},[S("span",{className:y},[S("i",{className:h})])])),C.body=S("div",{className:u}),C.week=S("div",{className:Y}),C.dates=S("div",{className:N}),C.months=S("div",{className:_}),C.years=S("div",{className:w}),e&&(C.footer=S("div",{className:v}),C.today=S("div",{className:f},[S("p",{className:m},[S("span",{className:y})])]),this.get("hasClock"))&&(C.time=S("div",{className:E},[S("p",{className:k},[S("span",{className:y})])])),this}},{key:"_renderTitle",value:function(){var e=this.getEls().title.querySelector("."+this.get("STYLES").TEXT),t=this.getYears(),a=this.getYear(),s="";switch(this.get("viewMode")){case 0:s=M.getMonth(a+"-"+this.getMonth()+"-1").fullText;break;case 1:s=M.getYear(a+"-1-1").fullText;break;case 2:s=t.start+" - "+t.end}return e.innerHTML=s,this}},{key:"_renderDays",value:function(){var e=this.get("STYLES"),a=e.DAY,s=e.WEEKEND,i=e.TEXT,n=this.get("DAYS"),r=M.DOM.createElement,l=document.createDocumentFragment();return n.forEach(function(e,t){t=0===t||t===n.length-1?a+" "+s:a;l.appendChild(r("div",{className:t},[r("span",{className:i},[e])]))}),this.getEls().week.appendChild(l),this}},{key:"_renderDates",value:function(){var e=this.get("DATES"),t=M.isLeapYear,a=document.createDocumentFragment(),s=this.getYear(),i=this.getMonth(),n=e[i-1],r=M.getDay(s+"-"+i+"-1").value,l=i-2<0?s-1:s,o=i-2<0?12:i-1,e=e[o-1],h=12===i?s+1:s,u=12===i?1:i+1;return t(s)&&2==o?e+=1:t(s)&&2===i&&(n+=1),t=42-(r+n),0!==r&&a.appendChild(this._getDatesFragment({year:l,month:o,start:e-(r-1),end:e,isPrev:!0,isNext:!1})),a.appendChild(this._getDatesFragment({year:s,month:i,start:1,end:n,isPrev:!1,isNext:!1})),0<t&&a.appendChild(this._getDatesFragment({year:h,month:u,start:1,end:t,isPrev:!1,isNext:!0})),this.getEls().dates.appendChild(a),this}},{key:"_repaintDates",value:function(){var e=this.get("STYLES").HIDDEN,t=M.DOM,a=this.getEls().dates;return t.addClass(a,e),a.innerHTML="",t.removeClass(a,e),this._renderDates(),this}},{key:"_getDatesFragment",value:function(e){for(var o=this,h=e.year,u=e.month,t=e.start,a=e.end,c=e.isPrev,d=e.isNext,g=" ",e=this.get("STYLES"),p=e.DATE,v=e.DATE_PREV,f=e.DATE_NEXT,m=e.CURRENT,E=e.PICKED,k=e.PICKED_RANGE,y=e.WEEKEND,D=e.TEXT,T=M.DOM.createElement,C=M.isDatesEqual,S=document.createDocumentFragment(),Y=this.getEls(),N=t,_=this.get("pickMode"),w=this.getPicked();N<=a;N+=1)!function(){var a=h+"-"+u+"-"+N,e=M.isToday(a),t=M.getDay(a),s=[T("span",{className:D},[N])],i="",n=T("div",{"data-date":a},s);switch(i+=p,c?i+=g+v:d&&(i+=g+f),e&&(i+=g+m),0!==t.value&&6!==t.value||(i+=g+y),_){case"single":var r=o.getDate().text;C(a,r)&&(i+=g+E,Y.date=n);break;case"multiple":w.forEach(function(e){C(a,e)&&(i+=g+E)});break;case"range":case"week":var l=[];2===w.length?(l=M.getRanges(w[0],w[1])).forEach(function(e,t){if(!C(a,e))return!1;0!==t&&t!==l.length-1?i=i+(g+E)+(g+k):0!==t&&t!==l.length-1||(i+=g+E)}):1===w.length&&(i+=g+E)}n.className=i,S.appendChild(n)}();return S}},{key:"_updateDateRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,s=e.PICKED_RANGE,e=M.DOM,t=e.hasClass,i=e.removeClass,n=e.addClass,e=this.getEls(),r=this.elements.date,l=e.dates,o=l.querySelectorAll("."+a);switch(this.data.picked.length){case 1:o.forEach(function(e){i(e,a),t(e,s)&&i(e,s)}),n(r,a);break;case 2:var h=M.getRanges(this.data.picked[0],this.data.picked[1]);h.forEach(function(e,t){e=l.querySelector('[data-date="'+e+'"]');0<t&&t<h.length-1&&(n(e,a),n(e,s))}),n(r,a)}return this}},{key:"_updateWeekRanges",value:function(){var e=this.get("STYLES"),a=e.PICKED,s=e.PICKED_RANGE,e=M.DOM,t=e.removeClass,i=e.addClass,n=this.getEls().dates,e=n.querySelectorAll("."+a),r=this.getPicked(),l=M.getWeekRanges(r[0]);return e.forEach(function(e){t(e,s),t(e,a)}),l.forEach(function(e,t){e=n.querySelector('[data-date="'+e+'"]');0<t&&t<l.length-1?(i(e,a),i(e,s)):0!==t&&t!==l.length-1||i(e,a)}),this}},{key:"_renderMonths",value:function(){var n=this,e=this.get("STYLES"),r=e.CURRENT,l=e.PICKED,o=e.MONTH,h=e.MONTH_PREV,u=e.MONTH_NEXT,c=e.TEXT,e=this.get("MONTHS"),d=M.DOM.createElement,g=document.createDocumentFragment(),t=this.getEls(),p=this.getYear(),v=M.getToday();return e.forEach(function(e,t){var a,s=n.getDate(),i=o;t<2?(i+=" "+h,p-1===s.year&&e===s.month&&(i+=" "+l),a=d("div",{className:i,"data-month":p-1+"-"+e+"-1"},[d("span",{className:c},[e])])):2<=t&&t<=13?(p===v.year&&e===v.month&&(i+=" "+r),p===s.year&&e===s.month&&(i+=" "+l),a=d("div",{className:i,"data-month":p+"-"+e+"-1"},[d("span",{className:c},[p+"-"+e])])):13<t&&t<=15&&(i+=" "+u,p+1===s.year&&e===s.month&&(i+=" "+l),a=d("div",{className:i,"data-month":p+1+"-"+e+"-1"},[d("span",{className:c},[e])])),g.appendChild(a)}),t.months.appendChild(g),this}},{key:"_repaintMonths",value:function(){var e=this.get("STYLES").HIDDEN,t=M.DOM,a=this.getEls().months;return t.addClass(a,e),a.innerHTML="",t.removeClass(a,e),this._renderMonths(),this}},{key:"_renderYears",value:function(){var e=this.getYears(),t=e.start,e=e.end,a=t-3,s=t-1,i=e+1,n=e+3,r=document.createDocumentFragment();return r.appendChild(this._getYearsFragment({start:a,end:s,isPrev:!0,isNext:!1})),r.appendChild(this._getYearsFragment({start:t,end:e,isPrev:!1,isNext:!1})),r.appendChild(this._getYearsFragment({start:i,end:n,isPrev:!1,isNext:!0})),this.getEls().years.appendChild(r),this}},{key:"_repaintYears",value:function(){var e=this.get("STYLES").HIDDEN,t=M.DOM,a=this.getEls().years;return t.addClass(a,e),a.innerHTML="",t.removeClass(a,e),this._renderYears(),this}},{key:"_getYearsFragment",value:function(e){for(var t=e.start,a=e.end,s=e.isPrev,i=e.isNext,e=this.get("STYLES"),n=e.YEAR,r=e.YEAR_PREV,l=e.YEAR_NEXT,o=e.CURRENT,h=e.PICKED,u=e.DISABLED,c=e.TEXT,d=M.DOM.createElement,g=document.createDocumentFragment(),p=this.getEls(),v=this.data.minYear,f=this.data.maxYear,m=t;m<=a;m+=1){var E=this.getDate(),k=m===M.getToday().year,E=m===E.year,y=n,D=d("div",{"data-year":m+"-1-1"},[d("span",{className:c},[m])]);s?y+=" "+r:i&&(y+=" "+l),k&&(y+=" "+o),E&&(y+=" "+h,p.year=D),(m<v||f<m)&&(y+=" "+u),D.className=y,g.appendChild(D)}return g}},{key:"_renderFooter",value:function(){function i(){var e=r.time.querySelector("."+n),t=(s=new Date).getHours(),a=s.getMinutes(),s=s.getSeconds();l&&clearTimeout(l),e.innerHTML=(t=t<10?"0"+t:t)+":"+(a=a<10?"0"+a:a)+":"+(s=s<10?"0"+s:s),l=setTimeout(i,1e3)}var n=this.get("STYLES").TEXT,r=this.getEls(),e=r.today.querySelector("."+n),t=M.getToday(),l=null;return e.innerHTML="今天："+t.text,M.DOM.setAttribute(e,"data-date",t.value),this.get("hasClock")&&i(),this}},{key:"_titleClick",value:function(){var e=this.get("viewMode");return this.update(e=2<(e+=1)?2:e),this}},{key:"_prevClick",value:function(){return this.prev(),this}},{key:"_nextClick",value:function(){return this.next(),this}},{key:"_dateClick",value:function(e){var e=e.delegateTarget,t=e.getAttribute("data-date");return this.pickDate(e),e=this.getPicked(),console.log("------------- _dateClick -------------"),"single"===this.get("pickMode")?console.log(t):console.log(e),this}},{key:"_monthClick",value:function(e){var e=e.delegateTarget,t=e.getAttribute("data-month");return this.pickMonth(e),console.log("------------- _monthClick -------------"),console.log(t),this}},{key:"_yearClick",value:function(e){var e=e.delegateTarget,t=e.getAttribute("data-year");return this.pickYear(e),console.log("------------- _yearClick -------------"),console.log(t),this}},{key:"_todayClick",value:function(){var e=this.getEls(),t=M.getToday().text;return this.pickToday(),this.pickDate(e.dates.querySelector('[data-date="'+t+'"]')),console.log("------------- _todayClick -------------"),console.log(t),this}}])&&s(e.prototype,t),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),M}();return u.defaults={parent:"calendar",time:"",viewMode:0,pickMode:"single",hasSwitcher:!0,hasFooter:!0,hasClock:!0,onDatePick:null,onMonthPick:null,onYearPick:null,onTodayPick:null,MONTHS:[11,12,1,2,3,4,5,6,7,8,9,10,11,12,1,2],DAYS:["日","一","二","三","四","五","六"],DATES:[31,28,31,30,31,30,31,31,30,31,30,31],STYLES:{WRAP:"cal-md",WRAP_WITHOUT_FOOTER:"cal-md-without-footer",HEADER:"cal-hd",TITLE:"cal-title",SWITCHER:"cal-switcher",PREV:"cal-prev",ICON_PREV:"icon-angle-up",NEXT:"cal-next",ICON_NEXT:"icon-angle-down",BODY:"cal-bd",WEEK:"cal-week",WEEKEND:"cal-weekend",DAY:"cal-day",DATES:"cal-dates",DATE:"cal-date",DATE_PREV:"cal-date-prev",DATE_NEXT:"cal-date-next",MONTHS:"cal-months",MONTH:"cal-month",MONTH_PREV:"cal-month-prev",MONTH_NEXT:"cal-month-next",YEARS:"cal-years",YEAR:"cal-year",YEAR_PREV:"cal-year-prev",YEAR_NEXT:"cal-year-next",FOOTER:"cal-ft",FOOTER_DATE:"cal-ft-date",TODAY:"cal-today",FOOTER_TIME:"cal-ft-time",TIME:"cal-time",TEXT:"cal-text",CURRENT:"cal-current",PICKED:"cal-picked",PICKED_RANGE:"cal-picked-range",PICKED_POINT:"cal-picked-point",DISABLED:"cal-disabled",HIDDEN:"cal-hidden"}},u.Utils={uuid:0,isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.apply(e)},isFunction:function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.apply(e)},isElement:function(e){return e&&e.nodeName&&e.tagName&&1===e.nodeType},guid:function(e){var t=u.Utils;return t.uuid+=1,e?e+"-"+t.uuid:"guid-"+t.uuid},trim:function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")},stripTags:function(e){return e.replace(/<\/?[^>]+(>|$)/g,"")}},u.DOM={createElement:function(e,t,a){var s,i=u.Utils,n=document.createElement(e);for(s in t)t.hasOwnProperty(s)&&u.DOM.setAttribute(n,s,t[s]);return i.isArray(a)&&a.forEach(function(e){var t;i.isElement(e)?t=e:(i.isString(e)||i.isNumber(e))&&(e=i.isString(e)?i.trim(i.stripTags(e)):e.toString(),t=document.createTextNode(e)),n.appendChild(t)}),n},setAttribute:function(e,t,a){var s=e.tagName.toLowerCase();switch(t){case"style":e.style.cssText=a;break;case"value":"input"===s||"textarea"===s?e.value=a:e.setAttribute(t,a);break;case"className":e.className=a;break;default:e.setAttribute(t,a)}},hasClass:function(e,t){e=e.className;return!!e&&e.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){var a=e.className;if(u.DOM.hasClass(e,t))return!1;a+=0<a.length?" "+t:t,e.className=a},removeClass:function(e,t){var a=e.className;if(!a||!u.DOM.hasClass(e,t))return!1;a=u.Utils.trim(a.replace(t,"")),e.className=a}},u.Delegate={on:function(a,s,i,n,r,e,l){function o(e){var t=h.getDelegateTarget(a,e.target,s);(e.delegateTarget=t)&&(!0===l&&h.off(a,i,o),n.call(r||a,e))}var h=u.Delegate;return"mouseenter"!==i&&"mouseleave"!==i||(e=!0),n._delegateWrapper=n,a.addEventListener(i,o,e||!1),n},once:function(e,t,a,s,i,n){u.Delegate.on(e,t,a,s,i,n,!0)},off:function(e,t,a,s){a._delegateWrapper&&delete(a=a._delegateWrapper)._delegateWrapper,e.removeEventListener(t,a,(s="mouseenter"!==t&&"mouseleave"!==t?s:!0)||!1)},stop:function(e){var t=u.Delegate;t.stopPropagation(e),t.preventDefault(e)},stopPropagation:function(e){var t=window.event;e.stopPropagation?e.stopPropagation():t.cancelBubble=!0},preventDefault:function(e){var t=window.event;e.preventDefault?e.preventDefault():t.returnValue=!1},getDelegateTarget:function(e,t,a){for(;t&&t!==e;){if(u.DOM.hasClass(t,a.replace(".","")))return t;t=t.parentElement}return null}},u.Utils.isFunction(Object.assign)||Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),s=1;s<arguments.length;s++){var i=arguments[s];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(a[n]=i[n])}return a},writable:!0,configurable:!0}),u});
//# sourceMappingURL=calendar.min.js.map
